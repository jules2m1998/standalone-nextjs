"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6862],{26952:function(e,t,n){n.d(t,{IQ:function(){return l},O:function(){return g},RT:function(){return f},be:function(){return h},g4:function(){return d},js:function(){return a},kC:function(){return p},s1:function(){return u},wC:function(){return i},zo:function(){return c}});var r=n(96778),o=n.n(r),s=n(16528);function i(e){if(!e)return"";let t=e.trim();if(!t.length)return e;let n=t.split(" ");return 1==n.length?n[0].slice(0,2):n.map(e=>e.slice(0,1)).reduce((e,t)=>e+t.toUpperCase(),"").slice(0,3)}function a(e){return e?e.charAt(0).toLowerCase()+e.slice(1):e}function c(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("")}let l=e=>(0,s.Vt)(e).result,u=e=>{let t=e.replace(/([A-Z])/g," $1").toLowerCase();return t.charAt(0).toUpperCase()+t.slice(1)};function d(e){if(o()(e))return"john+doe";let t=e.split("@");if(2!==t.length)return"john+doe";let n=t[0].split(".");return n.length<1?"john+doe":1===n.length?"".concat(n[0],"+").concat(n[0]):"".concat(n[0],"+").concat(n[1])}function h(e){if(o()(e))return"John Doe";let t=e.split("@");if(2!==t.length)return"John Doe";let n=t[0].split(".");return n.length<1?"John Doe":1===n.length?"".concat(p(n[0])," ").concat(p(n[0])):"".concat(p(n[0])," ").concat(p(n[1]))}let p=e=>"string"!=typeof e?"":e.charAt(0).toUpperCase()+e.slice(1),f=e=>{if(!e||"string"!=typeof e)return"";let t=e.split(".");return t.length>1?t[t.length-1]:""},g=e=>{if(!n.g.window)return"";let t=new URL(c(window.location.host,window.location.pathname));return e&&Object.entries(e).forEach(e=>{let[n,r]=e;r&&t.searchParams.set(n,r)}),t.toString().replace(window.location.host,"")}},88173:function(e,t,n){n.r(t),n.d(t,{useClientRenderToString:function(){return a}});var r=n(2265),o=n(57437),s=n(34040);let i=e=>new Promise(t=>{let n=document.createElement("div");s.createRoot(n).render((0,o.jsx)("div",{ref:()=>{var e;t((null===(e=n.firstElementChild)||void 0===e?void 0:e.innerHTML)||"")},children:e}))}),a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[n,o]=(0,r.useState)([]),s=Array.isArray(e)?e:[e];return(0,r.useEffect)(()=>{(async()=>{let e=s.map(i),t=await Promise.all(e);o&&o(t)})()},t),n}},16862:function(e,t,n){n.d(t,{PH:function(){return S},kC:function(){return T.kC},FV:function(){return j},zo:function(){return T.zo},pe:function(){return E},HI:function(){return C},O:function(){return T.O},RT:function(){return T.RT},wC:function(){return T.wC},yS:function(){return b},Iv:function(){return R},js:function(){return T.js},U0:function(){return L.U},sG:function(){return k},s1:function(){return T.s1},IQ:function(){return T.IQ}});class r{get gHeaders(){var e;return null!==(e=this.globalHeaders)&&void 0!==e?e:{}}objectToQueryParams(e){return Object.entries(e).reduce((e,t)=>{let[n,r]=t;return["".concat(n,"=").concat("string"==typeof r?r:JSON.stringify(r)),...e]},[]).join("&")}async baseRequest(e){var t,n,r,o,s;let{method:i,url:a,body:c,headers:l}=e;if(!this.baseUrl&&!a)throw Error("unable to perform a query on an undefined url");let u=null!==(t=null!=a?a:this.baseUrl)&&void 0!==t?t:"";a&&!/^https?:\/\/.*/i.test(a)&&(u=this.baseUrl+a);let d={url:u,options:{method:i,headers:{...this.gHeaders,...null!=l?l:{}},body:c}};if(this.requestInterceptor&&(d=await this.requestInterceptor(d)),!d)return Promise.resolve(new Response(JSON.stringify(null),{status:499}));{let e=fetch(null!==(o=d.url)&&void 0!==o?o:"",{method:null!==(s=null===(n=d.options)||void 0===n?void 0:n.method)&&void 0!==s?s:"GET",headers:d.options?{...d.options.headers}:{},body:null===(r=d.options)||void 0===r?void 0:r.body});return this.responseInterceptor&&(e=this.responseInterceptor(e)),e}}get(e){let{headers:t,query:n}=e,r=e.url;return n&&(r+="?".concat(this.objectToQueryParams(n))),this.baseRequest({url:r,method:"GET",headers:t})}post(e){let{url:t,body:n,headers:r}=e;return this.baseRequest({url:t,method:"POST",headers:r,body:n})}patch(e){let{url:t,body:n,headers:r}=e;return this.baseRequest({url:t,method:"PATCH",headers:{"Content-Type":"application/json-patch+json"},body:n})}put(e){let{url:t,body:n,headers:r}=e;return this.baseRequest({url:t,method:"PUT",headers:r,body:n})}async delete(e){let{headers:t,query:n}=e,r=e.url;n&&(r+="?".concat(this.objectToQueryParams(n)));let o=await this.baseRequest({url:r,method:"DELETE",headers:t});return(null==o?void 0:o.status)===499?{isNotAction:!0}:{isNotAction:!1,response:o}}constructor(e,t){this.baseUrl=e,this.globalHeaders={...t}}}let o=new r("",{});o.requestInterceptor=async e=>{var t;return(console.log("httpClientImplementation.responseInterceptor",e),"DELETE"!==(null==e?void 0:null===(t=e.options)||void 0===t?void 0:t.method)||await L.U.displayDeleteAlert())?e:null},o.responseInterceptor=async e=>{let t=await e;if(console.log("httpClientImplementation.responseInterceptor",t.status),500===t.status)throw Error("Something went wrong");if(404===t.status&&(window.location.href="/not-found"),400===t.status||409===t.status){let e=await t.clone().json();L.U.error(e.detail)}return e};var s,i=n(175),a=n(96778),c=n.n(a),l=n(92223),u=n.n(l),d=n(9895),h=n(25566);async function p(e){let t=await fetch("".concat(h.env.REFRESH_TOKEN_URL),{headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({client_id:"".concat(h.env.KEYCLOAK_CLIENT_ID),client_secret:"".concat(h.env.KEYCLOAK_CLIENT_SECRET),grant_type:"refresh_token",refresh_token:e.refresh_token}),method:"POST"}),n=await t.json();if(!t.ok)throw n;return{...e,access_token:n.access_token,decoded:(0,i.Z)(n.access_token),id_token:n.id_token,expires_at:Math.floor(Date.now()/1e3)+n.expires_in,refresh_token:n.refresh_token}}let f={providers:[(0,d.Z)({clientId:"".concat(h.env.KEYCLOAK_CLIENT_ID),clientSecret:"".concat(h.env.KEYCLOAK_CLIENT_SECRET),issuer:"".concat(h.env.KEYCLOAK_CLIENT_ISSUER)})],callbacks:{async jwt(e){let{token:t,account:n}=e,r=Math.floor(Date.now()/1e3);if(n)return t.decoded=(0,i.Z)(n.access_token),t.access_token=n.access_token,t.id_token=n.id_token,t.expires_at=n.expires_at,t.refresh_token=n.refresh_token,t;if(r<t.expires_at)return t;try{return await p(t)}catch(e){return{...t,error:"RefreshAccessTokenError"}}},async session(e){var t,n,r;let{session:o,token:s}=e;return(o.access_token=C(s.access_token),o.id_token=C(s.id_token),o.roles=null!==(r=null===(t=s.decoded.resource_access[null!==(n=h.env.KEYCLOAK_CLIENT_ID)&&void 0!==n?n:""])||void 0===t?void 0:t.roles)&&void 0!==r?r:[],o.error=s.error,c()(o.error))?o:{}}}};u()(f);var g=n(24033);let w=new r(null!==(s=n(25566).env.API_URL)&&void 0!==s?s:"",{Accept:"application/json","Content-Type":"application/json"}),v=async e=>{var t;let n=await (0,l.getServerSession)(f),r=null==n?void 0:n.access_token,o=r?E(r):"";return{...e,options:{...e.options,headers:{...null==e?void 0:null===(t=e.options)||void 0===t?void 0:t.headers,...n&&{Authorization:"Bearer ".concat(o)}}}}};w.requestInterceptor=v,w.responseInterceptor=async e=>{let t=await e;if(console.log("httpClientServerImplementation.responseInterceptor",t.status),401===t.status&&(0,g.redirect)("/logout"),403===t.status&&(0,g.redirect)("/not-found"),500===t.status){let e=t.clone();throw console.log(await e.json()),Error("Something went wrong")}return e};var y=n(8452),m=n.n(y),_=n(25566);function C(e){let t="".concat(_.env.NEXTAUTH_SECRET);return new(m())(t).encrypt(e)}function E(e){let t="".concat(_.env.NEXTAUTH_SECRET);return new(m())(t).decrypt(e)}var T=n(26952),A=n(57918);function k(e){return e&&e.trim().length?(0,A.WU)(new Date(e),"MM/dd/yyyy"):""}let I=(e,t,n)=>{if(!t.length||!n)return;let r=t[0];Object.entries(e.reduce((e,t)=>{let n=t[r];if("string"!=typeof n)return e;let o=e[n];return o?o.push(t):e[n]=[t],e},{})).forEach(e=>{let[o,s]=e,i={name:r,value:o,groups:s,children:[]},a=t.slice(1);s.length>1&&a.length?I(s,a,i.children):i.children=null,n.push(i)})};function b(e,t){let n=[];return I(e,t,n),n}n(88173);var L=n(25791);let S="MMMM Do YYYY, h:mm a",j=(e,t)=>(null==e?void 0:e.slice(0,t))+((null==e?void 0:e.length)>t?" ...":""),R=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;U()&&console.log(e,t)},U=()=>!1},25791:function(e,t,n){n.d(t,{U:function(){return u}});var r=n(57437),o=n(63014),s=n(16820),i=n.n(s),a=n(67342),c=n.n(a);class l{startLoading(e){return o.toast.loading(e)}stopLoading(e){return o.toast.done(e)}async displayDeleteAlert(){let{isConfirmed:e}=await this.mySwal.fire({title:(0,r.jsx)("h3",{children:"Are you sure ?"}),confirmButtonColor:"#500000",cancelButtonColor:"#FF0000",confirmButtonText:"Delete",cancelButtonText:"Cancel",showCancelButton:!0,customClass:{cancelButton:"swal-cancel-btn",confirmButton:"swal-confirm-btn",container:"swal-container-content"},icon:"warning",html:(0,r.jsx)("p",{children:"You won't be able to revert this!"})});return e}async toastAsync(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=o.toast.loading(t);try{let t=await e();return o.toast.update(i,{render:n,type:"success",isLoading:!1,autoClose:!0}),t}catch(e){return"CANCEL"===e.message&&s?o.toast.update(i,{render:s,type:"warning",isLoading:!1,autoClose:!0}):o.toast.update(i,{render:r,type:"error",isLoading:!1,autoClose:!0}),e.message}}async toastDeletionAsync(e){return await this.toastAsync(e,"Deletion in progress","Element successfully deleted","Something went wrong during deletion!","Deletion canceled")}async toastCreationAsync(e){return await this.toastAsync(e,"Creation in progress","Element successfully created","Something went wrong during creation!","Creation canceled")}error(e){o.toast.error(e)}success(e){o.toast.success(e)}async toastUpdateAsync(e){return await this.toastAsync(e,"Update in progress","Element successfully updated","Something went wrong during update!","Update canceled")}constructor(){this.mySwal=c()(i())}}var u=new l}}]);
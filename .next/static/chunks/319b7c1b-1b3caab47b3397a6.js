"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4794],{19003:function(e,t,i){i.d(t,{uK:function(){return K}});var r=i(16184),a=i(26971),s=i(91195),l=i(9280),n=i(31465),o=i(78950),h=i(50432),u=i(33514),c=i(89879),d=i(89228),b=i(7539),f=i(71224);function g(e,t,i){if(t<i)throw Error("Required at least "+i+" arguments for "+e+" but got "+t)}function p(e,t,i){if(g(e,t,i),t%i!=0)throw Error("Arguments for "+e+" must be in pairs of "+i)}function v(e){if(0===e||1===e)return e;throw Error("Flag must be 0 or 1")}function y(e,t){for(;!e.interactive||t(e);)if(e._parent)e=e._parent;else break}function m(e){let t=document.createElement("canvas");t.width=1,t.height=1;let i=t.getContext("2d",{willReadFrequently:!0});i.drawImage(e,0,0,1,1);try{return i.getImageData(0,0,1,1),!1}catch(t){return console.warn('Image "'+e.src+'" is loaded from different host and is not covered by CORS policy. For more information about the implications read here: https://www.amcharts.com/docs/v5/concepts/cors'),!0}}function _(e){e.width=0,e.height=0,e.style.width="0px",e.style.height="0px"}class w{constructor(){Object.defineProperty(this,"_x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_y",{enumerable:!0,configurable:!0,writable:!0,value:0})}get x(){return this._x}get y(){return this._y}set x(e){this._x=e}set y(e){this._y=e}}class x extends n.KK{constructor(e){super(),Object.defineProperty(this,"_layer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"mask",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportable",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"interactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"inactive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"wheelable",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"cancelTouch",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"isMeasured",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"buttonMode",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"alpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"compoundAlpha",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"angle",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"crisp",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"pivot",{enumerable:!0,configurable:!0,writable:!0,value:new w}),Object.defineProperty(this,"filter",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cursorOverStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_replacedCursorStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new s.y}),Object.defineProperty(this,"_matrix",{enumerable:!0,configurable:!0,writable:!0,value:new s.y}),Object.defineProperty(this,"_uMatrix",{enumerable:!0,configurable:!0,writable:!0,value:new s.y}),Object.defineProperty(this,"_renderer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_localBounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_bounds",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this._renderer=e}_dispose(){this._renderer._removeObject(this),this.getLayer().dirty=!0}getCanvas(){return this.getLayer().view}getLayer(){let e=this;for(;;){if(e._layer)return e._layer;if(!e._parent)return this._renderer.defaultLayer;e=e._parent}}setLayer(e,t){null==e?this._layer=void 0:(this._layer=this._renderer.getLayer(e,!0),this._layer.visible=!0,this._layer.margin=t,t&&h.Cg(this._layer.view,!1),this._renderer._ghostLayer.setMargin(this._renderer.layers),this._parent&&this._parent.registerChildLayer(this._layer),this._layer.dirty=!0,this._renderer.resizeLayer(this._layer),this._renderer.resizeGhost())}markDirtyLayer(){this.getLayer().dirty=!0}clear(){this.invalidateBounds()}invalidateBounds(){this._localBounds=void 0}_addBounds(e){}_getColorId(){return void 0===this._colorId&&(this._colorId=this._renderer.paintId(this)),this._colorId}_isInteractive(){return!1==this.inactive&&(this.interactive||this._renderer._forceInteractive>0)}_isInteractiveMask(){return this._isInteractive()}contains(e){for(;;){if(e===this)return!0;if(!e._parent)return!1;e=e._parent}}toGlobal(e){return this._matrix.apply(e)}toLocal(e){return this._matrix.applyInverse(e)}getLocalMatrix(){return this._uMatrix.setTransform(0,0,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._uMatrix}getLocalBounds(){return this._localBounds||(this._localBounds={left:1e7,top:1e7,right:-1e7,bottom:-1e7},this._addBounds(this._localBounds)),this._localBounds}getAdjustedBounds(e){this._setMatrix();let t=this.getLocalMatrix(),i=t.apply({x:e.left,y:e.top}),r=t.apply({x:e.right,y:e.top}),a=t.apply({x:e.right,y:e.bottom}),s=t.apply({x:e.left,y:e.bottom});return{left:Math.min(i.x,r.x,a.x,s.x),top:Math.min(i.y,r.y,a.y,s.y),right:Math.max(i.x,r.x,a.x,s.x),bottom:Math.max(i.y,r.y,a.y,s.y)}}on(e,t,i){return this.interactive?this._renderer._addEvent(this,e,t,i):new n.ku(()=>{})}_setMatrix(){this._localMatrix.setTransform(this.x,this.y,this.pivot.x,this.pivot.y,this.angle*Math.PI/180,this.scale),this._matrix.copyFrom(this._localMatrix),this._parent&&this._matrix.prepend(this._parent._matrix)}_transform(e,t){let i=this._matrix,r=i.tx*t,a=i.ty*t;this.crisp&&(r=Math.floor(r)+.5,a=Math.floor(a)+.5),e.setTransform(i.a*t,i.b*t,i.c*t,i.d*t,r,a)}_transformMargin(e,t,i){let r=this._matrix;e.setTransform(r.a*t,r.b*t,r.c*t,r.d*t,(r.tx+i.left)*t,(r.ty+i.top)*t)}_transformLayer(e,t,i){i.margin?this._transformMargin(e,i.scale||t,i.margin):this._transform(e,i.scale||t)}render(e){if(this.visible&&(!1!==this.exportable||!this._renderer._omitTainted)){this._setMatrix();let t=this._renderer.resolution,i=this._renderer.layers,r=this._renderer._ghostLayer,a=r.context,s=this.mask;s&&s._setMatrix(),u.S6(i,e=>{if(e){let i=e.context;i.save(),s&&(s._transformLayer(i,t,e),s._runPath(i),i.clip()),i.globalAlpha=this.compoundAlpha*this.alpha,this._transformLayer(i,t,e),this.filter&&(i.filter=this.filter)}}),a.save(),s&&this._isInteractiveMask()&&(s._transformMargin(a,t,r.margin),s._runPath(a),a.clip()),this._transformMargin(a,t,r.margin),this._render(e),a.restore(),u.S6(i,e=>{e&&e.context.restore()})}}_render(e){!1===this.exportable&&((this._layer||e).tainted=!0)}hovering(){return this._renderer._hovering.has(this)}dragging(){return this._renderer._dragging.some(e=>e.value===this)}shouldCancelTouch(){let e=this._renderer;return(!e.tapToActivate||!!e._touchActive)&&(!!this.cancelTouch||!!this._parent&&this._parent.shouldCancelTouch())}}class O extends x{constructor(){super(...arguments),Object.defineProperty(this,"interactiveChildren",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_childLayers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_children",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_isInteractiveMask(){return this.interactiveChildren||super._isInteractiveMask()}addChild(e){e._parent=this,this._children.push(e),e._layer&&this.registerChildLayer(e._layer)}addChildAt(e,t){e._parent=this,this._children.splice(t,0,e),e._layer&&this.registerChildLayer(e._layer)}removeChild(e){e._parent=void 0,u.Dm(this._children,e)}_render(e){super._render(e);let t=this._renderer;this.interactive&&this.interactiveChildren&&++t._forceInteractive;let i=this._layer||e;u.S6(this._children,e=>{e.compoundAlpha=this.compoundAlpha*this.alpha,e.render(i)}),this.interactive&&this.interactiveChildren&&--t._forceInteractive}registerChildLayer(e){this._childLayers||(this._childLayers=[]),u.nm(this._childLayers,e),this._parent&&this._parent.registerChildLayer(e)}markDirtyLayer(e=!1){super.markDirtyLayer(),e&&this._childLayers&&u.S6(this._childLayers,e=>e.dirty=!0)}_dispose(){super._dispose(),this._childLayers&&u.S6(this._childLayers,e=>{e.dirty=!0})}}function P(e,t){e.left=Math.min(e.left,t.x),e.top=Math.min(e.top,t.y),e.right=Math.max(e.right,t.x),e.bottom=Math.max(e.bottom,t.y)}class j{colorize(e,t){}path(e){}addBounds(e){}}class B extends j{colorize(e,t){e.beginPath()}}class S extends j{constructor(e){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){void 0!==t?e.fillStyle=t:e.fillStyle=this.color}}class k extends j{constructor(e){super(),Object.defineProperty(this,"clearShadow",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.fill(),this.clearShadow&&(e.shadowColor="",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0)}}class C extends j{colorize(e,t){e.stroke()}}class T extends j{constructor(e,t,i){super(),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"lineJoin",{enumerable:!0,configurable:!0,writable:!0,value:i})}colorize(e,t){void 0!==t?e.strokeStyle=t:e.strokeStyle=this.color,e.lineWidth=this.width,this.lineJoin&&(e.lineJoin=this.lineJoin)}}class L extends j{constructor(e){super(),Object.defineProperty(this,"dash",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.setLineDash(this.dash)}}class M extends j{constructor(e){super(),Object.defineProperty(this,"dashOffset",{enumerable:!0,configurable:!0,writable:!0,value:e})}colorize(e,t){e.lineDashOffset=this.dashOffset}}class A extends j{constructor(e,t,i,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.rect(this.x,this.y,this.width,this.height)}addBounds(e){let t=this.x,i=this.y,r=t+this.width,a=i+this.height;P(e,{x:t,y:i}),P(e,{x:r,y:i}),P(e,{x:t,y:a}),P(e,{x:r,y:a})}}class E extends j{constructor(e,t,i){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i})}path(e){e.moveTo(this.x+this.radius,this.y),e.arc(this.x,this.y,this.radius,0,2*Math.PI)}addBounds(e){P(e,{x:this.x-this.radius,y:this.y-this.radius}),P(e,{x:this.x+this.radius,y:this.y+this.radius})}}class I extends j{constructor(e,t,i,r){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radiusX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"radiusY",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.ellipse(0,0,this.radiusX,this.radiusY,0,0,2*Math.PI)}addBounds(e){P(e,{x:this.x-this.radiusX,y:this.y-this.radiusY}),P(e,{x:this.x+this.radiusX,y:this.y+this.radiusY})}}class D extends j{constructor(e,t,i,r,a,s){super(),Object.defineProperty(this,"cx",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cy",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"endAngle",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"anticlockwise",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){this.radius>0&&e.arc(this.cx,this.cy,this.radius,this.startAngle,this.endAngle,this.anticlockwise)}addBounds(e){let t=b.E4(this.cx,this.cy,this.startAngle*b.v4,this.endAngle*b.v4,this.radius);P(e,{x:t.left,y:t.top}),P(e,{x:t.right,y:t.bottom})}}class z extends j{constructor(e,t,i,r,a){super(),Object.defineProperty(this,"x1",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y1",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"x2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"y2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(e){this.radius>0&&e.arcTo(this.x1,this.y1,this.x2,this.y2,this.radius)}addBounds(e){}}class Y extends j{constructor(e,t){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t})}path(e){e.lineTo(this.x,this.y)}addBounds(e){P(e,{x:this.x,y:this.y})}}class R extends j{constructor(e,t){super(),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:t})}path(e){e.moveTo(this.x,this.y)}addBounds(e){P(e,{x:this.x,y:this.y})}}class H extends j{path(e){e.closePath()}}class W extends j{constructor(e,t,i,r,a,s){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"cpX2",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"cpY2",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:a}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:s})}path(e){e.bezierCurveTo(this.cpX,this.cpY,this.cpX2,this.cpY2,this.toX,this.toY)}addBounds(e){P(e,{x:this.cpX,y:this.cpY}),P(e,{x:this.cpX2,y:this.cpY2}),P(e,{x:this.toX,y:this.toY})}}class X extends j{constructor(e,t,i,r){super(),Object.defineProperty(this,"cpX",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"cpY",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"toX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"toY",{enumerable:!0,configurable:!0,writable:!0,value:r})}path(e){e.quadraticCurveTo(this.cpX,this.cpY,this.toX,this.toY)}addBounds(e){P(e,{x:this.cpX,y:this.cpY}),P(e,{x:this.toX,y:this.toY})}}class V extends j{constructor(e,t,i,r,a){super(),Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"blur",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"offsetX",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"offsetY",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"opacity",{enumerable:!0,configurable:!0,writable:!0,value:a})}colorize(e,t){this.opacity&&(e.fillStyle=this.color),e.shadowColor=this.color,e.shadowBlur=this.blur,e.shadowOffsetX=this.offsetX,e.shadowOffsetY=this.offsetY}}class F extends j{constructor(e,t,i,r,a){super(),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,writable:!0,value:a})}path(e){e.drawImage(this.image,this.x,this.y,this.width,this.height)}addBounds(e){P(e,{x:this.x,y:this.y}),P(e,{x:this.width,y:this.height})}}class G extends x{constructor(){super(...arguments),Object.defineProperty(this,"_operations",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"blendMode",{enumerable:!0,configurable:!0,writable:!0,value:r.b.NORMAL}),Object.defineProperty(this,"_hasShadows",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_fillAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_strokeAlpha",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}clear(){super.clear(),this._operations.length=0}_pushOp(e){this._operations.push(e)}beginFill(e,t=1){this._fillAlpha=t,e?e instanceof a.Il?this._pushOp(new S(e.toCSS(t))):(this.isMeasured=!0,this._pushOp(new S(e))):this._pushOp(new S("rgba(0, 0, 0, "+t+")"))}endFill(){this._pushOp(new k(this._hasShadows))}endStroke(){this._pushOp(new C)}beginPath(){this._pushOp(new B)}lineStyle(e=0,t,i=1,r){this._strokeAlpha=i,t?t instanceof a.Il?this._pushOp(new T(e,t.toCSS(i),r)):this._pushOp(new T(e,t,r)):this._pushOp(new T(e,"rgba(0, 0, 0, "+i+")",r))}setLineDash(e){this._pushOp(new L(e||[]))}setLineDashOffset(e=0){this._pushOp(new M(e))}drawRect(e,t,i,r){this._pushOp(new A(e,t,i,r))}drawCircle(e,t,i){this._pushOp(new E(e,t,i))}drawEllipse(e,t,i,r){this._pushOp(new I(e,t,i,r))}arc(e,t,i,r,a,s=!1){this._pushOp(new D(e,t,i,r,a,s))}arcTo(e,t,i,r,a){this._pushOp(new z(e,t,i,r,a))}lineTo(e,t){this._pushOp(new Y(e,t))}moveTo(e,t){this._pushOp(new R(e,t))}bezierCurveTo(e,t,i,r,a,s){this._pushOp(new W(e,t,i,r,a,s))}quadraticCurveTo(e,t,i,r){this._pushOp(new X(e,t,i,r))}closePath(){this._pushOp(new H)}shadow(e,t=0,i=0,r=0,a){this._hasShadows=!0,this._pushOp(new V(a?e.toCSS(a):e.toCSS(this._fillAlpha||this._strokeAlpha),t,i,r))}image(e,t,i,r,a){this._pushOp(new F(e,t,i,r,a))}svgPath(e){let t,i=0,r=0,a=null,s=null,l=null,n=null,o=/([MmZzLlHhVvCcSsQqTtAa])([^MmZzLlHhVvCcSsQqTtAa]*)/g,h=/[\u0009\u0020\u000A\u000C\u000D]*([\+\-]?[0-9]*\.?[0-9]+(?:[eE][\+\-]?[0-9]+)?)[\u0009\u0020\u000A\u000C\u000D]*,?/g;for(;null!==(t=o.exec(e));){let e=t[1],o=t[2],c=[];for(;null!==(t=h.exec(o));)c.push(t[1]);switch("S"!==e&&"s"!==e&&"C"!==e&&"c"!==e&&(a=null,s=null),"Q"!==e&&"q"!==e&&"T"!==e&&"t"!==e&&(l=null,n=null),e){case"M":p(e,c.length,2),i=+c[0],r=+c[1],this.moveTo(i,r);for(let e=2;e<c.length;e+=2)i=+c[e],r=+c[e+1],this.lineTo(i,r);break;case"m":p(e,c.length,2),i+=+c[0],r+=+c[1],this.moveTo(i,r);for(let e=2;e<c.length;e+=2)i+=+c[e],r+=+c[e+1],this.lineTo(i,r);break;case"L":p(e,c.length,2);for(let e=0;e<c.length;e+=2)i=+c[e],r=+c[e+1],this.lineTo(i,r);break;case"l":p(e,c.length,2);for(let e=0;e<c.length;e+=2)i+=+c[e],r+=+c[e+1],this.lineTo(i,r);break;case"H":g(e,c.length,1);for(let e=0;e<c.length;++e)i=+c[e],this.lineTo(i,r);break;case"h":g(e,c.length,1);for(let e=0;e<c.length;++e)i+=+c[e],this.lineTo(i,r);break;case"V":g(e,c.length,1);for(let e=0;e<c.length;++e)r=+c[e],this.lineTo(i,r);break;case"v":g(e,c.length,1);for(let e=0;e<c.length;++e)r+=+c[e],this.lineTo(i,r);break;case"C":p(e,c.length,6);for(let e=0;e<c.length;e+=6){let t=+c[e],l=+c[e+1];a=+c[e+2],s=+c[e+3],i=+c[e+4],r=+c[e+5],this.bezierCurveTo(t,l,a,s,i,r)}break;case"c":p(e,c.length,6);for(let e=0;e<c.length;e+=6){let t=+c[e]+i,l=+c[e+1]+r;a=+c[e+2]+i,s=+c[e+3]+r,i+=+c[e+4],r+=+c[e+5],this.bezierCurveTo(t,l,a,s,i,r)}break;case"S":p(e,c.length,4),(null===a||null===s)&&(a=i,s=r);for(let e=0;e<c.length;e+=4){let t=2*i-a,l=2*r-s;a=+c[e],s=+c[e+1],i=+c[e+2],r=+c[e+3],this.bezierCurveTo(t,l,a,s,i,r)}break;case"s":p(e,c.length,4),(null===a||null===s)&&(a=i,s=r);for(let e=0;e<c.length;e+=4){let t=2*i-a,l=2*r-s;a=+c[e]+i,s=+c[e+1]+r,i+=+c[e+2],r+=+c[e+3],this.bezierCurveTo(t,l,a,s,i,r)}break;case"Q":p(e,c.length,4);for(let e=0;e<c.length;e+=4)l=+c[e],n=+c[e+1],i=+c[e+2],r=+c[e+3],this.quadraticCurveTo(l,n,i,r);break;case"q":p(e,c.length,4);for(let e=0;e<c.length;e+=4)l=+c[e]+i,n=+c[e+1]+r,i+=+c[e+2],r+=+c[e+3],this.quadraticCurveTo(l,n,i,r);break;case"T":p(e,c.length,2),(null===l||null===n)&&(l=i,n=r);for(let e=0;e<c.length;e+=2)l=2*i-l,n=2*r-n,i=+c[e],r=+c[e+1],this.quadraticCurveTo(l,n,i,r);break;case"t":p(e,c.length,2),(null===l||null===n)&&(l=i,n=r);for(let e=0;e<c.length;e+=2)l=2*i-l,n=2*r-n,i+=+c[e],r+=+c[e+1],this.quadraticCurveTo(l,n,i,r);break;case"A":case"a":let d="a"===e;!function(e){for(let t=0;t<e.length;t+=7){let i=t+3,r=e[i];if(r.length>1){let t=/^([01])([01])(.*)$/.exec(r);null!==t&&(e.splice(i,0,t[1]),++i,e.splice(i,0,t[2]),++i,t[3].length>0?e[i]=t[3]:e.splice(i,1))}if((r=e[++i]).length>1){let t=/^([01])(.+)$/.exec(r);null!==t&&(e.splice(i,0,t[1]),e[++i]=t[2])}}}(c),p(e,c.length,7);for(let e=0;e<c.length;e+=7){let t=+c[e+5],a=+c[e+6];d&&(t+=i,a+=r);let s=(0,f.Z)({px:i,py:r,rx:+c[e],ry:+c[e+1],xAxisRotation:+c[e+2],largeArcFlag:v(+c[e+3]),sweepFlag:v(+c[e+4]),cx:t,cy:a});u.S6(s,e=>{this.bezierCurveTo(e.x1,e.y1,e.x2,e.y2,e.x,e.y),i=e.x,r=e.y})}break;case"Z":case"z":!function(e,t,i){if(t!==i)throw Error("Required "+i+" arguments for "+e+" but got "+t)}(e,c.length,0),this.closePath()}}}_runPath(e){e.beginPath(),u.S6(this._operations,t=>{t.path(e)})}_render(e){super._render(e);let t=this._layer||e,i=t.dirty,r=this._isInteractive();if(i||r){let e;let a=t.context,s=this._renderer._ghostLayer.context;i&&(a.globalCompositeOperation=this.blendMode,a.beginPath()),r&&(s.beginPath(),e=this._getColorId()),u.S6(this._operations,t=>{i&&(t.path(a),t.colorize(a,void 0)),r&&(t.path(s),t.colorize(s,e))})}}renderDetached(e){if(this.visible){this._setMatrix(),e.save();let t=this.mask;t&&(t._setMatrix(),t._transform(e,1),t._runPath(e),e.clip()),e.globalAlpha=this.compoundAlpha*this.alpha,this._transform(e,1),this.filter&&(e.filter=this.filter),e.globalCompositeOperation=this.blendMode,e.beginPath(),u.S6(this._operations,t=>{t.path(e),t.colorize(e,void 0)}),e.restore()}}_addBounds(e){this.visible&&this.isMeasured&&u.S6(this._operations,t=>{t.addBounds(e)})}}class q extends x{constructor(e,t,i){super(e),Object.defineProperty(this,"text",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"style",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"textVisible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_textInfo",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_originalScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),this.text=t,this.style=i}invalidateBounds(){super.invalidateBounds(),this._textInfo=void 0}_shared(e){this.style.textAlign&&(e.textAlign=this.style.textAlign),this.style.direction&&(e.direction=this.style.direction),this.style.textBaseline&&(e.textBaseline=this.style.textBaseline)}_prerender(e,t=!1,i=!1){super._render(e);let r=e.context,s=this._renderer._ghostLayer.context,l=this.style,n=this._getFontStyle(void 0,i);r.font=n,this._isInteractive()&&!t&&(s.font=n),l.fill&&(l.fill instanceof a.Il?r.fillStyle=l.fill.toCSS(void 0!=l.fillOpacity?l.fillOpacity:1):r.fillStyle=l.fill),l.shadowColor&&(e.context.shadowColor=l.shadowColor.toCSS(l.shadowOpacity||1)),l.shadowBlur&&(e.context.shadowBlur=l.shadowBlur),l.shadowOffsetX&&(e.context.shadowOffsetX=l.shadowOffsetX),l.shadowOffsetY&&(e.context.shadowOffsetY=l.shadowOffsetY),this._shared(r),this._isInteractive()&&!t&&(s.fillStyle=this._getColorId(),this._shared(s))}_getFontStyle(e,t=!1){let i=this.style,r=[];return e&&e.fontVariant?r.push(e.fontVariant):i.fontVariant&&r.push(i.fontVariant),!t&&(e&&e.fontWeight?r.push(e.fontWeight):i.fontWeight&&r.push(i.fontWeight)),e&&e.fontStyle?r.push(e.fontStyle):i.fontStyle&&r.push(i.fontStyle),e&&e.fontSize?(d.hj(e.fontSize)&&(e.fontSize=e.fontSize+"px"),r.push(e.fontSize)):i.fontSize&&(d.hj(i.fontSize)&&(i.fontSize=i.fontSize+"px"),r.push(i.fontSize)),e&&e.fontFamily?r.push(e.fontFamily):i.fontFamily?r.push(i.fontFamily):r.length&&r.push("Arial"),r.join(" ")}_render(e){let t=this._layer||e;if(this._textInfo||this._measure(t),this.textVisible){let e=this._isInteractive(),i=t.context,r=t.dirty,s=this._renderer._ghostLayer.context;i.save(),s.save(),this._prerender(t),u.S6(this._textInfo,(t,l)=>{u.S6(t.textChunks,(l,n)=>{if(l.style&&(i.save(),s.save(),i.font=l.style,this._isInteractive()&&(s.font=l.style)),l.fill&&(i.save(),i.fillStyle=l.fill.toCSS()),r&&i.fillText(l.text,l.offsetX,t.offsetY+l.offsetY),"underline"==l.textDecoration||"line-through"==l.textDecoration){let e,r=1,s=1,n=l.height,h=l.offsetX;switch(this.style.textAlign){case"right":case"end":h-=l.width;break;case"center":h-=l.width/2}if(l.style)switch(o.V.getTextStyle(l.style).fontWeight){case"bolder":case"bold":case"700":case"800":case"900":r=2}n&&(s=n/20),e="line-through"==l.textDecoration?r+t.offsetY+l.offsetY-l.height/2:r+1.5*s+t.offsetY+l.offsetY,i.save(),i.beginPath(),l.fill?i.strokeStyle=l.fill.toCSS():this.style.fill&&this.style.fill instanceof a.Il&&(i.strokeStyle=this.style.fill.toCSS()),i.lineWidth=r*s,i.moveTo(h,e),i.lineTo(h+l.width,e),i.stroke(),i.restore()}e&&this.interactive&&s.fillText(l.text,l.offsetX,t.offsetY+l.offsetY),l.fill&&i.restore(),l.style&&(i.restore(),s.restore())})}),i.restore(),s.restore()}}_addBounds(e){if(this.visible&&this.isMeasured){let t=this._measure(this.getLayer());P(e,{x:t.left,y:t.top}),P(e,{x:t.right,y:t.bottom})}}_ignoreFontWeight(){return/apple/i.test(navigator.vendor)}_measure(e){let t;let i=e.context,r=this._renderer._ghostLayer.context,a="rtl"==this.style.direction;this._textInfo=[];let s=this.style.oversizedBehavior,n=this.style.maxWidth,c=d.hj(n)&&"truncate"==s,b=d.hj(n)&&("wrap"==s||"wrap-no-break"==s);i.save(),r.save(),this._prerender(e,!0,this._ignoreFontWeight());let f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",g=this.text.toString().replace(/\r/g,"").split(/\n/),p=!0,v=0,y=0,m=0;u.S6(g,(e,a)=>{let s;for(s=""==e?[{type:"value",text:""}]:o.V.chunk(e,!1,this.style.ignoreFormatting);s.length>0;){let e,a,g,_,w={offsetY:m,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]},x=this._measureText(f,i),O=x.actualBoundingBoxAscent+x.actualBoundingBoxDescent;w.height=O,w.ascent=x.actualBoundingBoxAscent;let P=this.style.textDecoration,j=!1,B=!0,S=[];u.vn(s,(l,u)=>{if("format"==l.type){if("[/]"==l.text)p||(i.restore(),r.restore(),p=!0),a=void 0,t=void 0,g=void 0,P=this.style.textDecoration,_=void 0,e=l.text;else{p||(i.restore(),r.restore());let s=o.V.getTextStyle(l.text),n=this._getFontStyle(s);i.save(),r.save(),i.font=n,t=n,e=l.text,s.textDecoration&&(P=s.textDecoration),s.fill&&(a=s.fill),s.width&&(g=d.He(s.width)),s.verticalAlign&&(_=s.verticalAlign),p=!1;let h=this._measureText(f,i),u=h.actualBoundingBoxAscent+h.actualBoundingBoxDescent;u>w.height&&(w.height=u),h.actualBoundingBoxAscent>w.ascent&&(w.ascent=h.actualBoundingBoxAscent)}}else if("value"==l.type&&!j){let r=this._measureText(l.text,i),o=r.actualBoundingBoxLeft+r.actualBoundingBoxRight;if(c){let e=B||this.style.breakWords||!1,t=this.style.ellipsis||"",r=this._measureText(t,i),a=r.actualBoundingBoxLeft+r.actualBoundingBoxRight;if(w.width+o>n){let r=n-w.width-a;l.text=this._truncateText(i,l.text,r,e),l.text+=t,j=!0}}else if(b&&w.width+o>n){let t=n-w.width,r=this._truncateText(i,l.text,t,!1,B&&"wrap-no-break"!=this.style.oversizedBehavior);if(""==r)return this.textVisible=!0,!1;S=s.slice(u+1),h.fy(r)!=h.fy(l.text)&&(S.unshift({type:"value",text:l.text.substr(r.length)}),e&&S.unshift({type:"format",text:e})),l.text=h.fy(r),s=[],j=!0}let d=1,f=1;if(t&&g&&g>o){let e=o/g;switch(this.style.textAlign){case"right":case"end":d=e;break;case"center":d=e,f=e;break;default:f=e}o=g}let p=r.actualBoundingBoxAscent+r.actualBoundingBoxDescent;p>w.height&&(w.height=p),r.actualBoundingBoxAscent>w.ascent&&(w.ascent=r.actualBoundingBoxAscent),w.width+=o,w.left+=r.actualBoundingBoxLeft/d,w.right+=r.actualBoundingBoxRight/f,w.textChunks.push({style:t,fill:a,text:l.text,width:o,height:p,left:r.actualBoundingBoxLeft,right:r.actualBoundingBoxRight,ascent:r.actualBoundingBoxAscent,offsetX:0,offsetY:0,textDecoration:P,verticalAlign:_}),B=!1}return!0}),this.style.lineHeight instanceof l.gG?(w.height*=this.style.lineHeight.value,w.ascent*=this.style.lineHeight.value):(w.height*=this.style.lineHeight||1.2,w.ascent*=this.style.lineHeight||1.2),v<w.left&&(v=w.left),y<w.right&&(y=w.right),this._textInfo.push(w),m+=w.height,s=S||[]}}),p||(i.restore(),r.restore()),u.S6(this._textInfo,(e,t)=>{let i=0;u.S6(e.textChunks,t=>{if(t.offsetX=i+t.left-e.left,t.offsetY+=e.height-e.height*(this.style.baselineRatio||.19),i+=t.width,t.verticalAlign)switch(t.verticalAlign){case"super":t.offsetY-=e.height/2-t.height/2;break;case"sub":t.offsetY+=t.height/2}})});let _={left:a?-y:-v,top:0,right:a?v:y,bottom:m};if("none"!==s){let e=this._fitRatio(_);if(e<1){if("fit"==s)d.hj(this.style.minScale)&&e<this.style.minScale?(this.textVisible=!1,_.left=0,_.top=0,_.right=0,_.bottom=0):(this._originalScale&&1!=this._originalScale||(this._originalScale=this.scale),this.scale=e,this.textVisible=!0);else if("hide"==s)this.textVisible=!1,_.left=0,_.top=0,_.right=0,_.bottom=0;else{switch(this.style.textAlign){case"right":case"end":_.left=-n,_.right=0;break;case"center":_.left=-n/2,_.right=n/2;break;default:_.left=0,_.right=n}this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}}else this.scale=this._originalScale||1,this._originalScale=void 0,this.textVisible=!0}return i.restore(),r.restore(),_}_fitRatio(e){let t=this.style.maxWidth,i=this.style.maxHeight;return d.hj(t)||d.hj(i)?Math.min(t/(e.right-e.left)||1,i/(e.bottom-e.top)||1):1}_truncateText(e,t,i,r=!1,a=!0){let s;do{if(r)t=t.slice(0,-1);else{let e=t.replace(/[^,;:!?\\\/\s​]+[,;:!?\\\/\s​]*$/g,"");if((""==e||e===t)&&a)r=!0;else if(""==e)break;else t=e}let i=this._measureText(t,e);s=i.actualBoundingBoxLeft+i.actualBoundingBoxRight}while(s>i&&""!=t);return t}_measureText(e,t){let i=t.measureText(e),r={};if(null==i.actualBoundingBoxAscent){let t=document.createElement("div");t.innerText=e,t.style.visibility="hidden",t.style.position="absolute",t.style.top="-1000000px;",t.style.fontFamily=this.style.fontFamily||"",t.style.fontSize=this.style.fontSize+"",document.body.appendChild(t);let a=t.getBoundingClientRect();document.body.removeChild(t);let s=a.height,l=i.width;r={actualBoundingBoxAscent:s,actualBoundingBoxDescent:0,actualBoundingBoxLeft:0,actualBoundingBoxRight:l,fontBoundingBoxAscent:s,fontBoundingBoxDescent:0,width:l}}else r={actualBoundingBoxAscent:i.actualBoundingBoxAscent,actualBoundingBoxDescent:i.actualBoundingBoxDescent,actualBoundingBoxLeft:i.actualBoundingBoxLeft,actualBoundingBoxRight:i.actualBoundingBoxRight,fontBoundingBoxAscent:i.actualBoundingBoxAscent,fontBoundingBoxDescent:i.actualBoundingBoxDescent,width:i.width};let a=i.width;switch(this.style.textAlign){case"right":case"end":r.actualBoundingBoxLeft=a,r.actualBoundingBoxRight=0;break;case"center":r.actualBoundingBoxLeft=a/2,r.actualBoundingBoxRight=a/2;break;default:r.actualBoundingBoxLeft=0,r.actualBoundingBoxRight=a}return r}}class N{constructor(){Object.defineProperty(this,"fill",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fillOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textAlign",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontFamily",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontWeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"fontVariant",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textDecoration",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"lineHeight",{enumerable:!0,configurable:!0,writable:!0,value:(0,l.aQ)(120)}),Object.defineProperty(this,"baselineRatio",{enumerable:!0,configurable:!0,writable:!0,value:.19}),Object.defineProperty(this,"direction",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"textBaseline",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"oversizedBehavior",{enumerable:!0,configurable:!0,writable:!0,value:"none"}),Object.defineProperty(this,"breakWords",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"ellipsis",{enumerable:!0,configurable:!0,writable:!0,value:"…"}),Object.defineProperty(this,"maxWidth",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"maxHeight",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"minScale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"ignoreFormatting",{enumerable:!0,configurable:!0,writable:!0,value:!1})}}class J extends q{constructor(){super(...arguments),Object.defineProperty(this,"textType",{enumerable:!0,configurable:!0,writable:!0,value:"circular"}),Object.defineProperty(this,"radius",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"startAngle",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"inside",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"orientation",{enumerable:!0,configurable:!0,writable:!0,value:"auto"}),Object.defineProperty(this,"kerning",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_textReversed",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_render(e){"circular"===this.textType?this._renderCircular(e):super._render(e)}_renderCircular(e){if(this.textVisible){let t=this._layer||e;this._prerender(t);let i=this._isInteractive(),r=t.context,a=t.dirty,s=this._renderer._ghostLayer.context;r.save(),i&&s.save(),this._textInfo||this._measure(t);let l=this.radius||0,n=this.startAngle||0,o=0,h=this.orientation,c="auto"==h?"auto":"inward"==h,d=this.inside,f=this.style.textAlign||"left",g=this.kerning||0,p="left"==f?1:-1,v=!this._textReversed;if("auto"==c){let e=0,t=0;u.S6(this._textInfo,(t,i)=>{let r=n+-(t.width/(l-t.height)/2*p);r>e&&(e=r)}),t="left"==f?(e+o/2)*b.v4:"right"==f?(e-o/2)*b.v4:n*b.v4,c=(t=b.LW(t))>=270||t<=90}!0==c&&v&&(this._textInfo.reverse(),this._textReversed=!0),u.S6(this._textInfo,(e,t)=>{let h=e.height;d||(l+=h),(-1==p&&c||1==p&&!c)&&v&&e.textChunks.reverse();let b=n;o=0,"center"==f&&(b+=-(e.width/(l-h)/2*p),o=b-n),b+=Math.PI*(c?0:1),r.save(),i&&s.save(),r.rotate(b),i&&s.rotate(b);let y=0;u.S6(e.textChunks,(e,t)=>{let n=e.text,o=e.width;y=o/2/(l-h)*p,r.rotate(y),i&&s.rotate(y),e.style&&(r.save(),s.save(),r.font=e.style,i&&(s.font=e.style)),e.fill&&(r.save(),r.fillStyle=e.fill.toCSS()),r.textBaseline="middle",r.textAlign="center",i&&(s.textBaseline="middle",s.textAlign="center"),a&&r.fillText(n,0,(c?1:-1)*(0-l+h/2)),i&&s.fillText(n,0,(c?1:-1)*(0-l+h/2)),e.fill&&r.restore(),e.style&&(r.restore(),s.restore()),y=(o/2+g)/(l-h)*p,r.rotate(y),i&&s.rotate(y)}),r.restore(),i&&s.restore(),d&&(l-=h)}),r.restore(),i&&s.restore()}}_measure(e){return"circular"===this.textType?this._measureCircular(e):super._measure(e)}_measureCircular(e){let t;let i=e.context,r=this._renderer._ghostLayer.context,a="rtl"==this.style.direction,s=this.style.oversizedBehavior,n=this.style.maxWidth,h=d.hj(n)&&"truncate"==s,c=this.style.ellipsis||"";this.textVisible=!0,this._textInfo=[],this._textReversed=!1,i.save(),r.save(),this._prerender(e,!0);let b=this.text.toString().replace(/\r/g,"").split(/\n/),f=!0,g=0,p=0;return u.S6(b,(e,s)=>{let b,v,y,m=o.V.chunk(e,!1,this.style.ignoreFormatting),_={offsetY:p,ascent:0,width:0,height:0,left:0,right:0,textChunks:[]};u.S6(m,(e,s)=>{if("format"==e.type){if("[/]"==e.text)f||(i.restore(),r.restore(),f=!0),v=void 0,b=void 0,y=void 0;else{let t=o.V.getTextStyle(e.text),a=this._getFontStyle(t);i.save(),r.save(),i.font=a,b=a,t.fill&&(v=t.fill),t.width&&(y=d.He(t.width)),f=!1}h&&(t=this._measureText(c,i))}else if("value"==e.type){let r=e.text.match(/./ug)||[];a&&r.reverse();for(let e=0;e<r.length;e++){let s=r[e],l=this._measureText(s,i),o=l.width;b&&y&&y>o&&(o=y);let u=l.actualBoundingBoxAscent+l.actualBoundingBoxDescent;if(u>_.height&&(_.height=u),l.actualBoundingBoxAscent>_.ascent&&(_.ascent=l.actualBoundingBoxAscent),_.width+=o,_.left+=l.actualBoundingBoxLeft,_.right+=l.actualBoundingBoxRight,_.textChunks.push({style:b,fill:v,text:s,width:o,height:u+l.actualBoundingBoxDescent,left:l.actualBoundingBoxLeft,right:l.actualBoundingBoxRight,ascent:l.actualBoundingBoxAscent,offsetX:0,offsetY:u,textDecoration:void 0}),g+=o,h){t||(t=this._measureText(c,i));let e=t.actualBoundingBoxLeft+t.actualBoundingBoxRight;if((g+=e)+e>n){1==_.textChunks.length?this.textVisible=!1:(_.width+=e,_.left+=t.actualBoundingBoxLeft,_.right+=t.actualBoundingBoxRight,_.textChunks.push({style:b,fill:v,text:c,width:e,height:u+t.actualBoundingBoxDescent,left:t.actualBoundingBoxLeft,right:t.actualBoundingBoxRight,ascent:t.actualBoundingBoxAscent,offsetX:0,offsetY:u,textDecoration:void 0}));break}}if(a)break}}}),this.style.lineHeight instanceof l.gG?_.height*=this.style.lineHeight.value:_.height*=this.style.lineHeight||1.2,this._textInfo.push(_),p+=_.height}),f||(i.restore(),r.restore()),"hide"==s&&g>n&&(this.textVisible=!1),u.S6(this._textInfo,e=>{u.S6(e.textChunks,t=>{t.offsetY+=Math.round((e.height-t.height+(e.ascent-t.ascent))/2)})}),i.restore(),r.restore(),{left:0,top:0,right:0,bottom:0}}}class Q extends x{constructor(e,t){super(e),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"image",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowColor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowBlur",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOffsetY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shadowOpacity",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_imageMask",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.image=t}_dispose(){super._dispose(),this._imageMask&&_(this._imageMask)}getLocalBounds(){if(!this._localBounds){let e=0,t=0;this.width&&(e=this.width),this.height&&(t=this.height),this._localBounds={left:0,top:0,right:e,bottom:t},this._addBounds(this._localBounds)}return this._localBounds}_render(e){if(super._render(e),this.image){let t=this._layer||e;if(void 0===this.tainted&&(this.tainted=m(this.image),t.tainted=!0),!this.tainted||!this._renderer._omitTainted){if(t.dirty){this.shadowColor&&(t.context.shadowColor=this.shadowColor.toCSS(this.shadowOpacity||1)),this.shadowBlur&&(t.context.shadowBlur=this.shadowBlur),this.shadowOffsetX&&(t.context.shadowOffsetX=this.shadowOffsetX),this.shadowOffsetY&&(t.context.shadowOffsetY=this.shadowOffsetY);let e=this.width||this.image.naturalWidth,i=this.height||this.image.naturalHeight;t.context.drawImage(this.image,0,0,e,i)}if(this.interactive&&this._isInteractive()){let e=this._getMask(this.image);this._renderer._ghostLayer.context.drawImage(e,0,0)}}}}clear(){super.clear(),this.image=void 0,this._imageMask=void 0}_getMask(e){if(void 0===this._imageMask){let t=this.width||e.naturalWidth,i=this.height||e.naturalHeight,r=document.createElement("canvas");r.width=t,r.height=i;let a=r.getContext("2d");a.imageSmoothingEnabled=!1,a.fillStyle=this._getColorId(),a.fillRect(0,0,t,i),m(e)||(a.globalCompositeOperation="destination-in",a.drawImage(e,0,0,t,i)),this._imageMask=r}return this._imageMask}}class Z{constructor(e,t,i,r){Object.defineProperty(this,"event",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"originalPoint",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"point",{enumerable:!0,configurable:!0,writable:!0,value:i}),Object.defineProperty(this,"bbox",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"id",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"simulated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"native",{enumerable:!0,configurable:!0,writable:!0,value:!0}),h.be("touchevents")&&e instanceof Touch?this.id=e.identifier:this.id=null}}class K extends n.rk{constructor(e){if(super(),Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"_layerDom",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("div")}),Object.defineProperty(this,"layers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_dirtyLayers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"defaultLayer",{enumerable:!0,configurable:!0,writable:!0,value:this.getLayer(0)}),Object.defineProperty(this,"_ghostLayer",{enumerable:!0,configurable:!0,writable:!0,value:new $}),Object.defineProperty(this,"_patternCanvas",{enumerable:!0,configurable:!0,writable:!0,value:document.createElement("canvas")}),Object.defineProperty(this,"_patternContext",{enumerable:!0,configurable:!0,writable:!0,value:this._patternCanvas.getContext("2d")}),Object.defineProperty(this,"_realWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_realHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedWidth",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_calculatedHeight",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"resolution",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"interactionsEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"_listeners",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_events",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_colorId",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_colorMap",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_forceInteractive",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_omitTainted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_hovering",{enumerable:!0,configurable:!0,writable:!0,value:new Set}),Object.defineProperty(this,"_dragging",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_mousedown",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_lastPointerMoveEvent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tapToActivate",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"tapToActivateTimeout",{enumerable:!0,configurable:!0,writable:!0,value:3e3}),Object.defineProperty(this,"_touchActive",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_touchActiveTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),null==e?this.resolution=window.devicePixelRatio:this.resolution=e,this.view.style.position="absolute",this.view.setAttribute("aria-hidden","true"),this.view.appendChild(this._layerDom),this._disposers.push(new n.ku(()=>{c.S6(this._events,(e,t)=>{t.disposer.dispose()}),u.S6(this.layers,e=>{_(e.view),e.exportableView&&_(e.exportableView)}),_(this._ghostLayer.view),_(this._patternCanvas)})),this._disposers.push(h.ap(()=>{null==e&&(this.resolution=window.devicePixelRatio)})),h.be("touchevents")){let e=e=>{0!==this._dragging.length&&u.vn(this._dragging,t=>!t.value.shouldCancelTouch()||(e.preventDefault(),!1)),this._touchActiveTimeout&&this._delayTouchDeactivate()};this._disposers.push(h.Oo(window,"touchstart",e,{passive:!1})),this._disposers.push(h.Oo(this.view,"touchstart",e,{passive:!1})),this._disposers.push(h.Oo(this.view,"touchmove",()=>{this._touchActiveTimeout&&this._delayTouchDeactivate()},{passive:!0})),this._disposers.push(h.Oo(window,"click",e=>{this._touchActive=!1},{passive:!0})),this._disposers.push(h.Oo(this.view,"click",e=>{window.setTimeout(()=>{this._touchActive=!0,this._delayTouchDeactivate()},100)},{passive:!0}))}h.be("wheelevents")&&this._disposers.push(h.Oo(this.view,"wheel",e=>{let t=!1;this._hovering.forEach(e=>{if(e.wheelable)return t=!0,!1}),t&&e.preventDefault()},{passive:!1}))}_delayTouchDeactivate(){this._touchActiveTimeout&&clearTimeout(this._touchActiveTimeout),this.tapToActivateTimeout>0&&(this._touchActiveTimeout=window.setTimeout(()=>{this._touchActive=!1},this.tapToActivateTimeout))}get debugGhostView(){return!!this._ghostLayer.view.parentNode}set debugGhostView(e){e?this._ghostLayer.view.parentNode||this.view.appendChild(this._ghostLayer.view):this._ghostLayer.view.parentNode&&this._ghostLayer.view.parentNode.removeChild(this._ghostLayer.view)}createLinearGradient(e,t,i,r){return this.defaultLayer.context.createLinearGradient(e,t,i,r)}createRadialGradient(e,t,i,r,a,s){return this.defaultLayer.context.createRadialGradient(e,t,i,r,a,s)}createPattern(e,t,i,r,a){return this._patternCanvas.width=r,this._patternCanvas.height=a,this._patternContext.clearRect(0,0,r,a),t.renderDetached(this._patternContext),e.renderDetached(this._patternContext),this._patternContext.createPattern(this._patternCanvas,i)}makeContainer(){return new O(this)}makeGraphics(){return new G(this)}makeText(e,t){return new q(this,e,t)}makeTextStyle(){return new N}makeRadialText(e,t){return new J(this,e,t)}makePicture(e){return new Q(this,e)}resizeLayer(e){e.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resizeGhost(){this._ghostLayer.resize(this._calculatedWidth,this._calculatedHeight,this._calculatedWidth,this._calculatedHeight,this.resolution)}resize(e,t,i,r){this._realWidth=e,this._realHeight=t,this._calculatedWidth=i,this._calculatedHeight=r,u.S6(this.layers,e=>{e&&(e.dirty=!0,this.resizeLayer(e))}),this.resizeGhost(),this.view.style.width=i+"px",this.view.style.height=r+"px"}createDetachedLayer(e=!1){let t=document.createElement("canvas"),i=t.getContext("2d",{willReadFrequently:e}),r=new U(t,i);return t.style.position="absolute",t.style.top="0px",t.style.left="0px",r}getLayerByOrder(e){let t=this.layers,i=t.length;for(let r=0;r<i;r++){let i=t[r];if(i.order==e)return i}}getLayer(e,t=!0){let i,r=this.getLayerByOrder(e);if(r)return r;let a=this.createDetachedLayer(99==e);a.order=e,a.visible=t,a.visible&&this.resizeLayer(a);let s=this.layers;s.push(a),s.sort((e,t)=>e.order>t.order?1:e.order<t.order?-1:0);let l=s.length,n=u.cq(s,a);for(let e=n+1;e<l;e++)if(s[e].visible){i=s[e];break}return a.visible&&(void 0===i?this._layerDom.appendChild(a.view):this._layerDom.insertBefore(a.view,i.view)),a}render(e){if(this._dirtyLayers.length=0,u.S6(this.layers,e=>{e&&e.dirty&&e.visible&&(this._dirtyLayers.push(e),e.clear())}),this._ghostLayer.clear(),e.render(this.defaultLayer),this._ghostLayer.context.restore(),u.S6(this.layers,e=>{if(e){let t=e.context;t.beginPath(),t.moveTo(0,0),t.stroke()}}),u.S6(this._dirtyLayers,e=>{e.context.restore(),e.dirty=!1}),this._hovering.size&&this._lastPointerMoveEvent){let{events:e,target:t,native:i}=this._lastPointerMoveEvent;u.S6(e,e=>{this._dispatchGlobalMousemove(e,t,i)})}}paintId(e){let t=function(e){let t=[0,0,0];for(let i=0;i<24;i++)t[i%3]<<=1,t[i%3]|=1&e,e>>=1;return(0|t[2])+(t[1]<<8)+(t[0]<<16)}(++this._colorId),i=a.Il.fromHex(t).toCSS();return this._colorMap[i]=e,i}_removeObject(e){void 0!==e._colorId&&delete this._colorMap[e._colorId]}_adjustBoundingBox(e){let t=this._ghostLayer.margin;return new DOMRect(-t.left,-t.top,e.width+t.left+t.right,e.height+t.top+t.bottom)}getEvent(e,t=!0){let i=this.view.getBoundingClientRect(),r=e.clientX||0,a=e.clientY||0,s=this._calculatedWidth/this._realWidth,l=this._calculatedHeight/this._realHeight;return new Z(e,{x:r-i.left,y:a-i.top},{x:(r-(t?i.left:0))*s,y:(a-(t?i.top:0))*l},this._adjustBoundingBox(i))}_getHitTarget(e,t,i){if(0===t.width||0===t.height||e.x<t.left||e.x>t.right||e.y<t.top||e.y>t.bottom||!i||!this._layerDom.contains(i))return;let r=this._ghostLayer.getImageData(e,t);if(0===r.data[0]&&0===r.data[1]&&0===r.data[2])return!1;let s=a.Il.fromRGB(r.data[0],r.data[1],r.data[2]).toCSS();return this._colorMap[s]}_withEvents(e,t){let i=this._events[e];if(void 0!==i){i.dispatching=!0;try{t(i)}finally{i.dispatching=!1,i.cleanup&&(i.cleanup=!1,u.ZR(i.callbacks,e=>!e.disposed),0===i.callbacks.length&&(i.disposer.dispose(),delete this._events[e]))}}}_dispatchEventAll(e,t){this.interactionsEnabled&&this._withEvents(e,e=>{u.S6(e.callbacks,e=>{e.disposed||e.callback.call(e.context,t)})})}_dispatchEvent(e,t,i){if(!this.interactionsEnabled)return!1;let r=!1;return this._withEvents(e,e=>{u.S6(e.callbacks,e=>{e.disposed||e.object!==t||(e.callback.call(e.context,i),r=!0)})}),r}_dispatchMousedown(e,t){let i=e.button;if(0!=i&&2!=i&&1!=i&&void 0!==i)return;let r=this.getEvent(e),a=this._getHitTarget(r.originalPoint,r.bbox,t);if(a){let e=r.id,t=!1;y(a,i=>{let a={id:e,value:i};return this._mousedown.push(a),!t&&this._dispatchEvent("pointerdown",i,r)&&(t=!0,this._dragging.some(t=>t.value===i&&t.id===e)||this._dragging.push(a)),!0})}}_dispatchGlobalMousemove(e,t,i){let r=this.getEvent(e),a=this._getHitTarget(r.originalPoint,r.bbox,t);r.native=i,a?(this._hovering.forEach(e=>{e.contains(a)||(this._hovering.delete(e),e.cursorOverStyle&&h.A_(document.body,"cursor",e._replacedCursorStyle),this._dispatchEvent("pointerout",e,r))}),r.native&&y(a,e=>(this._hovering.has(e)||(this._hovering.add(e),e.cursorOverStyle&&(e._replacedCursorStyle=h.C2(document.body,"cursor"),h.A_(document.body,"cursor",e.cursorOverStyle)),this._dispatchEvent("pointerover",e,r)),!0))):(this._hovering.forEach(e=>{e.cursorOverStyle&&h.A_(document.body,"cursor",e._replacedCursorStyle),this._dispatchEvent("pointerout",e,r)}),this._hovering.clear()),this._dispatchEventAll("globalpointermove",r)}_dispatchGlobalMouseup(e,t){let i=this.getEvent(e);i.native=t,this._dispatchEventAll("globalpointerup",i)}_dispatchDragMove(e){if(0!==this._dragging.length){let t=this.getEvent(e),i=t.id;this._dragging.forEach(e=>{e.id===i&&this._dispatchEvent("pointermove",e.value,t)})}}_dispatchDragEnd(e,t){let i;let r=e.button;if(0==r||void 0===r)i="click";else if(2==r)i="rightclick";else{if(1!=r)return;i="middleclick"}let a=this.getEvent(e),s=a.id;if(0!==this._mousedown.length){let e=this._getHitTarget(a.originalPoint,a.bbox,t);e&&this._mousedown.forEach(t=>{t.id===s&&t.value.contains(e)&&this._dispatchEvent(i,t.value,a)}),this._mousedown.length=0}0!==this._dragging.length&&(this._dragging.forEach(e=>{e.id===s&&this._dispatchEvent("pointerup",e.value,a)}),this._dragging.length=0)}_dispatchDoubleClick(e,t){let i=this.getEvent(e),r=this._getHitTarget(i.originalPoint,i.bbox,t);r&&y(r,e=>!this._dispatchEvent("dblclick",e,i))}_dispatchWheel(e,t){let i=this.getEvent(e),r=this._getHitTarget(i.originalPoint,i.bbox,t);r&&y(r,e=>!this._dispatchEvent("wheel",e,i))}_makeSharedEvent(e,t){if(void 0===this._listeners[e]){let i=t();this._listeners[e]=new n.DM(()=>{delete this._listeners[e],i.dispose()})}return this._listeners[e].increment()}_onPointerEvent(e,t){var i,r;let a=!1,s=null;function l(){s=null,a=!1}return new n.FV([new n.ku(()=>{null!==s&&clearTimeout(s),l()}),h.Oo(this.view,h.FL(e),e=>{a=!0,null!==s&&clearTimeout(s),s=window.setTimeout(l,0)}),(i=window,r=(e,i)=>{null!==s&&(clearTimeout(s),s=null),t(e,i,a),a=!1},h.Oo(i,h.FL(e),e=>{let t=h.NI(e),i=e.touches;i?(0==i.length&&(i=e.changedTouches),r(u.JG(i),t)):r([e],t)}))])}_initEvent(e){switch(e){case"globalpointermove":case"pointerover":case"pointerout":return this._makeSharedEvent("pointermove",()=>{let e=(e,t,i)=>{this._lastPointerMoveEvent={events:e,target:t,native:i},u.S6(e,e=>{this._dispatchGlobalMousemove(e,t,i)})};return new n.FV([this._onPointerEvent("pointerdown",e),this._onPointerEvent("pointermove",e)])});case"globalpointerup":return this._makeSharedEvent("pointerup",()=>{let e=this._onPointerEvent("pointerup",(e,t,i)=>{u.S6(e,e=>{this._dispatchGlobalMouseup(e,i)}),this._lastPointerMoveEvent={events:e,target:t,native:i}}),t=this._onPointerEvent("pointercancel",(e,t,i)=>{u.S6(e,e=>{this._dispatchGlobalMouseup(e,i)}),this._lastPointerMoveEvent={events:e,target:t,native:i}});return new n.ku(()=>{e.dispose(),t.dispose()})});case"click":case"rightclick":case"middleclick":case"pointerdown":case"pointermove":case"pointerup":return this._makeSharedEvent("pointerdown",()=>{let e=this._onPointerEvent("pointerdown",(e,t)=>{u.S6(e,e=>{this._dispatchMousedown(e,t)})}),t=this._onPointerEvent("pointermove",e=>{u.S6(e,e=>{this._dispatchDragMove(e)})}),i=this._onPointerEvent("pointerup",(e,t)=>{u.S6(e,e=>{this._dispatchDragEnd(e,t)})}),r=this._onPointerEvent("pointercancel",(e,t)=>{u.S6(e,e=>{this._dispatchDragEnd(e,t)})});return new n.ku(()=>{e.dispose(),t.dispose(),i.dispose(),r.dispose()})});case"dblclick":return this._makeSharedEvent("dblclick",()=>this._onPointerEvent("dblclick",(e,t)=>{u.S6(e,e=>{this._dispatchDoubleClick(e,t)})}));case"wheel":return this._makeSharedEvent("wheel",()=>h.Oo(window,h.FL("wheel"),e=>{this._dispatchWheel(e,h.NI(e))},{passive:!1}))}}_addEvent(e,t,i,r){let a=this._events[t];void 0===a&&(a=this._events[t]={disposer:this._initEvent(t),callbacks:[],dispatching:!1,cleanup:!1});let s={object:e,context:r,callback:i,disposed:!1};return a.callbacks.push(s),new n.ku(()=>{s.disposed=!0,a.dispatching?a.cleanup=!0:(u.Dm(a.callbacks,s),0===a.callbacks.length&&(a.disposer.dispose(),delete this._events[t]))})}getCanvas(e,t){this.render(e),t||(t={});let i=this.resolution,r=Math.floor(this._calculatedWidth*this.resolution),a=Math.floor(this._calculatedHeight*this.resolution);if(t.minWidth&&t.minWidth>r){let e=t.minWidth/r;e>i&&(i=e*this.resolution)}if(t.minHeight&&t.minHeight>a){let e=t.minHeight/a;e>i&&(i=e*this.resolution)}if(t.maxWidth&&t.maxWidth<r){let e=t.maxWidth/r;e<i&&(i=e*this.resolution)}if(t.maxHeight&&t.maxHeight>a){let e=t.maxHeight/a;e<i&&(i=e*this.resolution)}t.maintainPixelRatio&&(i/=this.resolution);let s=[],l=!1,n=document.createElement("canvas");i!=this.resolution&&(l=!0,r=r*i/this.resolution,a=a*i/this.resolution),n.width=r,n.height=a,n.style.position="fixed",n.style.top="-10000px",this.view.appendChild(n),s.push(n);let o=n.getContext("2d"),h=0,c=0,d=!1;return u.S6(this.layers,e=>{if(e&&e.visible&&(e.tainted||l)){d=!0,e.exportableView=e.view,e.exportableContext=e.context,e.view=document.createElement("canvas"),e.view.style.position="fixed",e.view.style.top="-10000px",this.view.appendChild(e.view),s.push(e.view);let t=0,l=0;e.margin&&(t+=e.margin.left||0+e.margin.right||0,l+=e.margin.top||0+e.margin.bottom||0),e.view.width=r+t,e.view.height=a+l,e.context=e.view.getContext("2d"),e.dirty=!0,e.scale=i}}),d&&(this._omitTainted=!0,this.render(e),this._omitTainted=!1),u.S6(this.layers,e=>{if(e&&e.visible){let t=0,i=0;e.margin&&(t=-(e.margin.left||0)*this.resolution,i=-(e.margin.top||0)*this.resolution),o.drawImage(e.view,t,i),e.exportableView&&(e.view=e.exportableView,e.exportableView=void 0),e.exportableContext&&(e.context=e.exportableContext,e.exportableContext=void 0),h<e.view.clientWidth&&(h=e.view.clientWidth),c<e.view.clientHeight&&(c=e.view.clientHeight),e.scale=void 0}}),n.style.width=h+"px",n.style.height=c+"px",u.S6(s,e=>{e.style.position="",e.style.top="",this.view.removeChild(e)}),n}}class ${constructor(){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:!1,willReadFrequently:!0}),this.context.imageSmoothingEnabled=!1,this.view.style.position="absolute",this.view.style.top="0px",this.view.style.left="0px"}resize(e,t,i,r,a){e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,r+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px",this._width=Math.floor(e*a),this._height=Math.floor(t*a),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=r+"px"}getImageData(e,t){return this.context.getImageData(Math.round((e.x-t.left)/t.width*this._width),Math.round((e.y-t.top)/t.height*this._height),1,1)}setMargin(e){this.margin.left=0,this.margin.right=0,this.margin.top=0,this.margin.bottom=0,u.S6(e,e=>{e.margin&&(this.margin.left=Math.max(this.margin.left,e.margin.left),this.margin.right=Math.max(this.margin.right,e.margin.right),this.margin.top=Math.max(this.margin.top,e.margin.top),this.margin.bottom=Math.max(this.margin.bottom,e.margin.bottom))})}clear(){this.context.save(),this.context.fillStyle="#000",this.context.fillRect(0,0,this._width,this._height)}}class U{constructor(e,t){Object.defineProperty(this,"view",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"context",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"tainted",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"margin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"order",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"visible",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"scale",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"dirty",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"exportableView",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"exportableContext",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_width",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_height",{enumerable:!0,configurable:!0,writable:!0,value:0}),this.view=e,this.context=t}resize(e,t,i,r,a){null!=this.width&&(e=this.width,i=this.width),null!=this.height&&(t=this.height,r=this.height),this.margin?(e+=this.margin.left+this.margin.right,t+=this.margin.top+this.margin.bottom,i+=this.margin.left+this.margin.right,r+=this.margin.top+this.margin.bottom,this.view.style.left=-this.margin.left+"px",this.view.style.top=-this.margin.top+"px"):(this.view.style.left="0px",this.view.style.top="0px"),this._width=Math.floor(e*a),this._height=Math.floor(t*a),this.view.width=this._width,this.view.style.width=i+"px",this.view.height=this._height,this.view.style.height=r+"px"}clear(){this.context.save(),this.context.clearRect(0,0,this._width,this._height)}}}}]);